import{d as v,c as _,a as n,b as i,t as f,o as a,u as B,e as b,n as S,f as g,w as N,g as h,h as T,r as V,F as $,i as F,j as C,k as A,l as I,v as M,m as q}from "./index-Cv38t883.js";const D={class:"tag"},U=v({__name:"TagItem",props:{item:{}},setup(o){B(c=>({"0a3d911e":e.value}));const t=o,e=_(()=>t.item.bg);return(c, r)=>(a(),n("div",D,[i("span",null,f(c.item.title),1)]))}}),w=(o, t)=>{const e=o.__vccOpts||o;for(const[c,r]of t)e[c]=r;return e},L=w(U,[["__scopeId","data-v-471135a2"]]);function j(o){const t=b(),e=_(()=>t.state.folders.folders);return{getFolder:_(()=>e.value.find(r=>r.id===o)||null)}}const z={class:"task-body"},E={class:"task-checkbox"},H={key:0,class:"material-symbols-outlined"},O={class:"task-name item-name"},P={key:0,class:"task-tags"},R=v({__name:"TaskItem",props:{item:{}},setup(o){const t=o,e=b(),c= l=>e.dispatch("tasks/deleteTask",l),r= l=>e.dispatch("tasks/updateTask",l),m= l=>e.dispatch("notification/setNotification",l),s=async()=>{await c(t.item.id),await m({type:"success",text:"Задача успешно удалена!"})},y=async()=>{await r({id:t.item.id,completed:t.item.completed}),await m({type:"success",text:"Статус задачи успешно изменен!"})},{getFolder:d}=j(t.item.folderId);return(l, x)=>(a(),n("div",{class:S(["task item",{done:l.item.completed}]),onClick:y},[i("div",z,[i("div",E,[l.item.completed?(a(),n("span",H," check ")):g("",!0)]),i("span",O,f(l.item.title),1)]),i("span",{class:"material-symbols-outlined delete",onClick:N(s,["stop"])}," delete "),h(d)?(a(),n("div",P,[T(L,{item:h(d)},null,8,["item"])])):g("",!0)],2))}}),G={class:"button"},J={key:0,class:"material-symbols-outlined"},K={key:1},Q=v({__name:"ButtonCmp",props:{icon:{},text:{}},setup(o){return(t, e)=>(a(),n("button",G,[t.icon?(a(),n("span",J,f(t.icon),1)):g("",!0),t.text?(a(),n("span",K,f(t.text),1)):g("",!0)]))}}),W=w(Q,[["__scopeId","data-v-94eba535"]]);function X(){const o=V(!1);async function t(e){try{o.value=!0,await e()}finally{o.value=!1}}return{isLoading:o,loadingCallback:t}}const Y={},Z={class:"loader"};function tt(o, t){return a(),n("div",Z,t[0]||(t[0]=[i("span",{class:"material-symbols-outlined"}," progress_activity ",-1)]))}const et=w(Y,[["render",tt],["__scopeId","data-v-f99560cf"]]),st={class:"filters"},at=v({__name:"TaskFilter",setup(o){const t=b(),e=_(()=>t.state.tasks.activeFilter),c= s=>t.commit("tasks/setActiveFilter",s),r=_(()=>t.state.statuses.statuses);function m(s){return{id:s.key,title:s.title,bg:e.value===s.key?"#57F":""}}return(s, y)=>(a(),n("div",st,[(a(!0),n($,null,F(r.value, d=>(a(),C(L,{key:`filter${d.key}`,item:m(d),onClick: l=>c(d.key)},null,8,["item","onClick"]))),128))]))}}),ot=w(at,[["__scopeId","data-v-2b0b8c58"]]),nt={class:"container"},it=["value"],lt={class:"tasks-cards cards"},rt=v({__name:"TasksView",setup(o){const t=b(),e=_(()=>t.getters["tasks/getFilteredTasks"]),c=_(()=>t.state.folders.folders),r= k=>t.dispatch("tasks/postNewTask",k),m={title:"",folder:""},s=V({...m}),y= k=>t.dispatch("notification/setNotification",k),d=X(),l=async()=>{s.value.title&&(await r({title:s.value.title,folderId:s.value.folder}),await y({type:"success",text:"Создана новая задача!"}),s.value={...m})};async function x(){const k=[await t.dispatch("tasks/getTasks"),await t.dispatch("folders/getFolders"),await t.dispatch("statuses/getStatuses")];await Promise.all(k)}return A(async()=>{await d.loadingCallback(async()=>await x())}),(k, p)=>(a(),n("section",nt,[p[3]||(p[3]=i("div",{class:"container-head"},[i("h1",null,"Задачи")],-1)),i("form",{class:"task-form",onSubmit:N(l,["prevent"])},[I(i("input",{"onUpdate:modelValue":p[0]||(p[0]= u=>s.value.title=u),type:"text",name:"task-title",placeholder:"Введите название задачи"},null,512),[[M,s.value.title]]),I(i("select",{name:"folder","onUpdate:modelValue":p[1]||(p[1]= u=>s.value.folder=u)},[p[2]||(p[2]=i("option",{selected:"",value:""}," Без папки ",-1)),(a(!0),n($,null,F(c.value, u=>(a(),n("option",{key:u.title,value:u.id},f(u.title),9,it))),128))],512),[[q,s.value.folder]]),T(W,{icon:"add",border:"",disabled:h(d).isLoading.value},null,8,["disabled"])],32),T(ot),i("div",lt,[h(d).isLoading.value?(a(),C(et,{key:1})):(a(!0),n($,{key:0},F(e.value, u=>(a(),C(R,{key:u.id,item:u},null,8,["item"]))),128))])]))}});export{rt as default};
